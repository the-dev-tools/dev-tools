syntax = "proto3";

package collection.v1;
option go_package = "devtools-services/gen/collection/v1;collectionv1";


import "nodedata/v1/nodedata.proto";


service CollectionService {
  // CRUD operations
  rpc Create (CreateRequest) returns (CreateResponse);
  rpc Save (SaveRequest) returns (SaveResponse);
  rpc Load  (LoadRequest) returns (LoadResponse);
  rpc Delete (DeleteRequest) returns (DeleteResponse);

  rpc List (ListRequest) returns (ListResponse);

  // // Helper rpcs
  // // // postman
  rpc ImportPostman (ImportPostmanRequest) returns (ImportPostmanResponse);

  // // // Move node to another parent
  rpc Move (MoveRequest) returns (MoveResponse);
}

// Requests
// // Base

// // // Create
message CreateRequest {
  string name = 1;
}

message CreateResponse {
  string id = 1;
  string name = 2;
}

// // // Load
message LoadRequest {
  string id = 1;
}

message LoadResponse {
  string id = 1;
  string name = 2;
  repeated CollectionNode nodes = 3;
}

// // // Save
message SaveRequest {
  string id = 1;
  string name = 2;
  repeated CollectionNode nodes = 3;
}

message SaveResponse {
}

// // // Delete
message DeleteRequest {
  string id = 1;
}

message DeleteResponse {
}


// // // List
message ListRequest {
}

message ListResponse {
  repeated string ids = 1;
}

// Helper Requests

// // //  Postman
message ImportPostmanRequest {
  string name = 2; // collection name
  bytes data = 3; // collection data (json)
}

message ImportPostmanResponse {
  string id = 1;
}

// // Move
message MoveRequest {
  string id = 1;
  string parent_id = 2;
}

message MoveResponse {
}


// Collection Node
message CollectionNode{
    string id = 1;
	  string collection_id = 2;
    string name = 3;
    string type = 4; // such as "request", "folder"
    optional string parent_id = 5; // INFO: optional
    optional nodedata.v1.NodeApiCallData data = 6; // INFO: optional
}

