// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: betterauth_org.sql

package gen

import (
	"context"
	"database/sql"

	idwrap "github.com/the-dev-tools/dev-tools/packages/server/pkg/idwrap"
)

const authCountOrganizations = `-- name: AuthCountOrganizations :one
SELECT
  COUNT(*)
FROM
  auth_organization
`

func (q *Queries) AuthCountOrganizations(ctx context.Context) (int64, error) {
	row := q.queryRow(ctx, q.authCountOrganizationsStmt, authCountOrganizations)
	var count int64
	err := row.Scan(&count)
	return count, err
}

const authCreateInvitation = `-- name: AuthCreateInvitation :exec
INSERT INTO
  auth_invitation (id, email, inviter_id, organization_id, role, status, created_at, expires_at)
VALUES
  (?, ?, ?, ?, ?, ?, ?, ?)
`

type AuthCreateInvitationParams struct {
	ID             idwrap.IDWrap
	Email          string
	InviterID      idwrap.IDWrap
	OrganizationID idwrap.IDWrap
	Role           string
	Status         string
	CreatedAt      int64
	ExpiresAt      int64
}

func (q *Queries) AuthCreateInvitation(ctx context.Context, arg AuthCreateInvitationParams) error {
	_, err := q.exec(ctx, q.authCreateInvitationStmt, authCreateInvitation,
		arg.ID,
		arg.Email,
		arg.InviterID,
		arg.OrganizationID,
		arg.Role,
		arg.Status,
		arg.CreatedAt,
		arg.ExpiresAt,
	)
	return err
}

const authCreateMember = `-- name: AuthCreateMember :exec
INSERT INTO
  auth_member (id, user_id, organization_id, role, created_at)
VALUES
  (?, ?, ?, ?, ?)
`

type AuthCreateMemberParams struct {
	ID             idwrap.IDWrap
	UserID         idwrap.IDWrap
	OrganizationID idwrap.IDWrap
	Role           string
	CreatedAt      int64
}

func (q *Queries) AuthCreateMember(ctx context.Context, arg AuthCreateMemberParams) error {
	_, err := q.exec(ctx, q.authCreateMemberStmt, authCreateMember,
		arg.ID,
		arg.UserID,
		arg.OrganizationID,
		arg.Role,
		arg.CreatedAt,
	)
	return err
}

const authCreateOrganization = `-- name: AuthCreateOrganization :exec
INSERT INTO
  auth_organization (id, name, slug, logo, metadata, created_at)
VALUES
  (?, ?, ?, ?, ?, ?)
`

type AuthCreateOrganizationParams struct {
	ID        idwrap.IDWrap
	Name      string
	Slug      sql.NullString
	Logo      sql.NullString
	Metadata  sql.NullString
	CreatedAt int64
}

func (q *Queries) AuthCreateOrganization(ctx context.Context, arg AuthCreateOrganizationParams) error {
	_, err := q.exec(ctx, q.authCreateOrganizationStmt, authCreateOrganization,
		arg.ID,
		arg.Name,
		arg.Slug,
		arg.Logo,
		arg.Metadata,
		arg.CreatedAt,
	)
	return err
}

const authDeleteInvitation = `-- name: AuthDeleteInvitation :exec
DELETE FROM auth_invitation
WHERE
  id = ?
`

func (q *Queries) AuthDeleteInvitation(ctx context.Context, id idwrap.IDWrap) error {
	_, err := q.exec(ctx, q.authDeleteInvitationStmt, authDeleteInvitation, id)
	return err
}

const authDeleteInvitationsByOrganization = `-- name: AuthDeleteInvitationsByOrganization :exec
DELETE FROM auth_invitation
WHERE
  organization_id = ?
`

func (q *Queries) AuthDeleteInvitationsByOrganization(ctx context.Context, organizationID idwrap.IDWrap) error {
	_, err := q.exec(ctx, q.authDeleteInvitationsByOrganizationStmt, authDeleteInvitationsByOrganization, organizationID)
	return err
}

const authDeleteMember = `-- name: AuthDeleteMember :exec
DELETE FROM auth_member
WHERE
  id = ?
`

func (q *Queries) AuthDeleteMember(ctx context.Context, id idwrap.IDWrap) error {
	_, err := q.exec(ctx, q.authDeleteMemberStmt, authDeleteMember, id)
	return err
}

const authDeleteMembersByOrganization = `-- name: AuthDeleteMembersByOrganization :exec
DELETE FROM auth_member
WHERE
  organization_id = ?
`

func (q *Queries) AuthDeleteMembersByOrganization(ctx context.Context, organizationID idwrap.IDWrap) error {
	_, err := q.exec(ctx, q.authDeleteMembersByOrganizationStmt, authDeleteMembersByOrganization, organizationID)
	return err
}

const authDeleteMembersByUser = `-- name: AuthDeleteMembersByUser :exec
DELETE FROM auth_member
WHERE
  user_id = ?
`

func (q *Queries) AuthDeleteMembersByUser(ctx context.Context, userID idwrap.IDWrap) error {
	_, err := q.exec(ctx, q.authDeleteMembersByUserStmt, authDeleteMembersByUser, userID)
	return err
}

const authDeleteOrganization = `-- name: AuthDeleteOrganization :exec
DELETE FROM auth_organization
WHERE
  id = ?
`

func (q *Queries) AuthDeleteOrganization(ctx context.Context, id idwrap.IDWrap) error {
	_, err := q.exec(ctx, q.authDeleteOrganizationStmt, authDeleteOrganization, id)
	return err
}

const authGetInvitation = `-- name: AuthGetInvitation :one

SELECT
  id,
  email,
  inviter_id,
  organization_id,
  role,
  status,
  created_at,
  expires_at
FROM
  auth_invitation
WHERE
  id = ?
LIMIT
  1
`

// Invitations
func (q *Queries) AuthGetInvitation(ctx context.Context, id idwrap.IDWrap) (AuthInvitation, error) {
	row := q.queryRow(ctx, q.authGetInvitationStmt, authGetInvitation, id)
	var i AuthInvitation
	err := row.Scan(
		&i.ID,
		&i.Email,
		&i.InviterID,
		&i.OrganizationID,
		&i.Role,
		&i.Status,
		&i.CreatedAt,
		&i.ExpiresAt,
	)
	return i, err
}

const authGetMember = `-- name: AuthGetMember :one

SELECT
  id,
  user_id,
  organization_id,
  role,
  created_at
FROM
  auth_member
WHERE
  id = ?
LIMIT
  1
`

// Members
func (q *Queries) AuthGetMember(ctx context.Context, id idwrap.IDWrap) (AuthMember, error) {
	row := q.queryRow(ctx, q.authGetMemberStmt, authGetMember, id)
	var i AuthMember
	err := row.Scan(
		&i.ID,
		&i.UserID,
		&i.OrganizationID,
		&i.Role,
		&i.CreatedAt,
	)
	return i, err
}

const authGetMemberByUserAndOrg = `-- name: AuthGetMemberByUserAndOrg :one
SELECT
  id,
  user_id,
  organization_id,
  role,
  created_at
FROM
  auth_member
WHERE
  user_id = ?
  AND organization_id = ?
LIMIT
  1
`

type AuthGetMemberByUserAndOrgParams struct {
	UserID         idwrap.IDWrap
	OrganizationID idwrap.IDWrap
}

func (q *Queries) AuthGetMemberByUserAndOrg(ctx context.Context, arg AuthGetMemberByUserAndOrgParams) (AuthMember, error) {
	row := q.queryRow(ctx, q.authGetMemberByUserAndOrgStmt, authGetMemberByUserAndOrg, arg.UserID, arg.OrganizationID)
	var i AuthMember
	err := row.Scan(
		&i.ID,
		&i.UserID,
		&i.OrganizationID,
		&i.Role,
		&i.CreatedAt,
	)
	return i, err
}

const authGetOrganization = `-- name: AuthGetOrganization :one

SELECT
  id,
  name,
  slug,
  logo,
  metadata,
  created_at
FROM
  auth_organization
WHERE
  id = ?
LIMIT
  1
`

// BetterAuth Organizations
func (q *Queries) AuthGetOrganization(ctx context.Context, id idwrap.IDWrap) (AuthOrganization, error) {
	row := q.queryRow(ctx, q.authGetOrganizationStmt, authGetOrganization, id)
	var i AuthOrganization
	err := row.Scan(
		&i.ID,
		&i.Name,
		&i.Slug,
		&i.Logo,
		&i.Metadata,
		&i.CreatedAt,
	)
	return i, err
}

const authGetOrganizationBySlug = `-- name: AuthGetOrganizationBySlug :one
SELECT
  id,
  name,
  slug,
  logo,
  metadata,
  created_at
FROM
  auth_organization
WHERE
  slug = ?
LIMIT
  1
`

func (q *Queries) AuthGetOrganizationBySlug(ctx context.Context, slug sql.NullString) (AuthOrganization, error) {
	row := q.queryRow(ctx, q.authGetOrganizationBySlugStmt, authGetOrganizationBySlug, slug)
	var i AuthOrganization
	err := row.Scan(
		&i.ID,
		&i.Name,
		&i.Slug,
		&i.Logo,
		&i.Metadata,
		&i.CreatedAt,
	)
	return i, err
}

const authListInvitationsByEmail = `-- name: AuthListInvitationsByEmail :many
SELECT
  id,
  email,
  inviter_id,
  organization_id,
  role,
  status,
  created_at,
  expires_at
FROM
  auth_invitation
WHERE
  email = ?
`

func (q *Queries) AuthListInvitationsByEmail(ctx context.Context, email string) ([]AuthInvitation, error) {
	rows, err := q.query(ctx, q.authListInvitationsByEmailStmt, authListInvitationsByEmail, email)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []AuthInvitation{}
	for rows.Next() {
		var i AuthInvitation
		if err := rows.Scan(
			&i.ID,
			&i.Email,
			&i.InviterID,
			&i.OrganizationID,
			&i.Role,
			&i.Status,
			&i.CreatedAt,
			&i.ExpiresAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const authListInvitationsByOrganization = `-- name: AuthListInvitationsByOrganization :many
SELECT
  id,
  email,
  inviter_id,
  organization_id,
  role,
  status,
  created_at,
  expires_at
FROM
  auth_invitation
WHERE
  organization_id = ?
`

func (q *Queries) AuthListInvitationsByOrganization(ctx context.Context, organizationID idwrap.IDWrap) ([]AuthInvitation, error) {
	rows, err := q.query(ctx, q.authListInvitationsByOrganizationStmt, authListInvitationsByOrganization, organizationID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []AuthInvitation{}
	for rows.Next() {
		var i AuthInvitation
		if err := rows.Scan(
			&i.ID,
			&i.Email,
			&i.InviterID,
			&i.OrganizationID,
			&i.Role,
			&i.Status,
			&i.CreatedAt,
			&i.ExpiresAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const authListMembersByOrganization = `-- name: AuthListMembersByOrganization :many
SELECT
  id,
  user_id,
  organization_id,
  role,
  created_at
FROM
  auth_member
WHERE
  organization_id = ?
`

func (q *Queries) AuthListMembersByOrganization(ctx context.Context, organizationID idwrap.IDWrap) ([]AuthMember, error) {
	rows, err := q.query(ctx, q.authListMembersByOrganizationStmt, authListMembersByOrganization, organizationID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []AuthMember{}
	for rows.Next() {
		var i AuthMember
		if err := rows.Scan(
			&i.ID,
			&i.UserID,
			&i.OrganizationID,
			&i.Role,
			&i.CreatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const authListMembersByUser = `-- name: AuthListMembersByUser :many
SELECT
  id,
  user_id,
  organization_id,
  role,
  created_at
FROM
  auth_member
WHERE
  user_id = ?
`

func (q *Queries) AuthListMembersByUser(ctx context.Context, userID idwrap.IDWrap) ([]AuthMember, error) {
	rows, err := q.query(ctx, q.authListMembersByUserStmt, authListMembersByUser, userID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []AuthMember{}
	for rows.Next() {
		var i AuthMember
		if err := rows.Scan(
			&i.ID,
			&i.UserID,
			&i.OrganizationID,
			&i.Role,
			&i.CreatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const authListOrganizationsForUser = `-- name: AuthListOrganizationsForUser :many
SELECT
  o.id,
  o.name,
  o.slug,
  o.logo,
  o.metadata,
  o.created_at
FROM
  auth_organization o
INNER JOIN auth_member m ON o.id = m.organization_id
WHERE
  m.user_id = ?
`

func (q *Queries) AuthListOrganizationsForUser(ctx context.Context, userID idwrap.IDWrap) ([]AuthOrganization, error) {
	rows, err := q.query(ctx, q.authListOrganizationsForUserStmt, authListOrganizationsForUser, userID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []AuthOrganization{}
	for rows.Next() {
		var i AuthOrganization
		if err := rows.Scan(
			&i.ID,
			&i.Name,
			&i.Slug,
			&i.Logo,
			&i.Metadata,
			&i.CreatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const authUpdateInvitation = `-- name: AuthUpdateInvitation :exec
UPDATE auth_invitation
SET
  status = ?
WHERE
  id = ?
`

type AuthUpdateInvitationParams struct {
	Status string
	ID     idwrap.IDWrap
}

func (q *Queries) AuthUpdateInvitation(ctx context.Context, arg AuthUpdateInvitationParams) error {
	_, err := q.exec(ctx, q.authUpdateInvitationStmt, authUpdateInvitation, arg.Status, arg.ID)
	return err
}

const authUpdateMember = `-- name: AuthUpdateMember :exec
UPDATE auth_member
SET
  role = ?
WHERE
  id = ?
`

type AuthUpdateMemberParams struct {
	Role string
	ID   idwrap.IDWrap
}

func (q *Queries) AuthUpdateMember(ctx context.Context, arg AuthUpdateMemberParams) error {
	_, err := q.exec(ctx, q.authUpdateMemberStmt, authUpdateMember, arg.Role, arg.ID)
	return err
}

const authUpdateOrganization = `-- name: AuthUpdateOrganization :exec
UPDATE auth_organization
SET
  name = ?,
  slug = ?,
  logo = ?,
  metadata = ?
WHERE
  id = ?
`

type AuthUpdateOrganizationParams struct {
	Name     string
	Slug     sql.NullString
	Logo     sql.NullString
	Metadata sql.NullString
	ID       idwrap.IDWrap
}

func (q *Queries) AuthUpdateOrganization(ctx context.Context, arg AuthUpdateOrganizationParams) error {
	_, err := q.exec(ctx, q.authUpdateOrganizationStmt, authUpdateOrganization,
		arg.Name,
		arg.Slug,
		arg.Logo,
		arg.Metadata,
		arg.ID,
	)
	return err
}
